{% extends "base_template.html" %} {% load static %} {% load humanize %} {% block content %}

<div class="property-page">
  <div class="property-card">
    <div class="card">
      <img
        id="mainImage"
        {% if images %}
          src = "{{ images.first.url }}"
        {% endif %}
        src=""
        class="card-img-top"
        alt="Main House Image"
      />
      <div class="card-body">
        <h5 class="property-address">
            {{property.house_number}} {{property.street_name}} {{property.street_suffix}},
            {{property.city}}, {{property.state}} {{property.postal_code}}
        </h5>
        <div class="property-status">
            <span>FOR SALE</span> | <span>{{property.property_subtype}}</span> | <span>ACTIVE UNDER CONTRACT</span>
        </div>
        <div class="property-details-grid">
          <div class="property-detail-item">
            <strong>${{ property.list_price|floatformat:0|intcomma }}</strong>
            <span>Price</span>
        </div>
            <div class="property-detail-item">
                <strong>{{ property.bedrooms }}</strong>
                <span>Beds</span>
            </div>
            <div class="property-detail-item">
                <strong>{{ baths_info }}</strong>
                <span>Baths</span>
            </div>
            <div class="property-detail-item">
                <strong>{{ property.building_area_total }}</strong>
                <span>SqFt</span>
            </div>
            <div class="property-detail-item">
                <strong>{{ property.year_built }}</strong>
                <span>Built</span>
            </div>
        </div>
        <div class="property-features">
          <h5>Features</h5>
          <div class="features-grid">
              <div class="feature-item">
                  <strong>Appliances</strong>
                  <p>Dishwasher, Disposal</p>
              </div>
              <div class="feature-item">
                  <strong>Flooring</strong>
                  <p>Tile, Wood</p>
              </div>
              <div class="feature-item">
                  <strong>General Features</strong>
                  <p>Heat</p>
              </div>
              <div class="feature-item">
                  <strong>Parking</strong>
                  <p>Extended Garage</p>
              </div>
          </div>
      </div>
      
    </div>

    <div class="carousel-card">
      <div class="carousel-container">
        {% if images %}
          {% for image in images  %}
           <div
            class="carousel-item"
            onclick="changeMainImage('{{image.url}}')"
          >
            <img src="{{image.url}}" alt="House Image" />
          </div> 
          {% endfor %}
        {% endif %}

      </div>

      {% comment %} <button class="carousel-prev" onclick="scrollCarousel(-1)">
        &#10094;
      </button>
      <button class="carousel-next" onclick="scrollCarousel(1)">
        &#10095;
      </button> {% endcomment %}
    </div>
  </div>

  <script>
    function changeMainImage(imageUrl) {
      document.getElementById("mainImage").src = imageUrl;
    }

    function scrollCarousel(direction) {
      const container = document.querySelector(".carousel-container");
      container.scrollLeft += direction * container.offsetWidth;
    }
  </script>

  {% endblock content %}
</div>
