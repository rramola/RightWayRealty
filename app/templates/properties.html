{% extends "base_template.html" %} {% load static %} {% load humanize %} {% block content %}

<div class="property-page">
  <div class="property-card">
    <div class="card">
      <img
        id="mainImage"
        {% if images %}
          src = "{{ images.first.url }}"
        {% endif %}
        src=""
        class="card-img-top"
        alt="Main House Image"
      />
      <div class="card-body">
        <h5 class="property-address">
            {{property.house_number}} {{property.street_name}} {{property.street_suffix}},
            {{property.city}}, {{property.state}} {{property.postal_code}}
        </h5>
        <div class="property-status">
            <span>MLS# {{property.mls_number}}</span> | <span>Property Type: {{property.property_subtype}}</span> | <span>Status: {{property.mls_status}}</span>
        </div>
        <div class="property-details-grid">
          <div class="property-detail-item">
            <strong>${{ property.list_price|floatformat:0|intcomma }}</strong>
            <span>Price</span>
        </div>
            <div class="property-detail-item">
                <strong>{{ property.bedrooms }}</strong>
                <span>Beds</span>
            </div>
            <div class="property-detail-item">
                <strong>{{ property.baths_total }}</strong>
                <span>Baths</span>
            </div>
            <div class="property-detail-item">
                <strong>{{ property.building_area_total }}</strong>
                <span>SqFt</span>
            </div>
            <div class="property-detail-item">
                <strong>{{ property.year_built }}</strong>
                <span>Built</span>
            </div>
            <div class="property-detail-item">
              <strong>
                <div id="property-highschool-detail" class='property-school-detail'>{{property.highschool_district }}</div>
                <div id="property-middleschool-detail" class='property-school-detail'>{{property.middle_junior_school_district }}</div></strong>
              <span>Schools</span>
            </div>
        </div>
        <div class="property-features">
          <h5>Description</h5>
          <div class="features-grid">
              <div class="feature-item">
                  <span>{{property.description}}</span>
              </div>
          </div>
        <div class="property-features">
          <h5>Features</h5>
          <div class="features-grid">
              <div class="feature-item">
                  <strong>Appliances</strong>
                  {% for appliance in property.appliances  %}
                  {{appliance}}{% endfor %}
                  {% for item in property.laundry_features  %}{{item}}{% endfor %}
              </div>
              <div class="feature-item">
                  <strong>Flooring</strong>
                  <p>Tile, Wood</p>
              </div>
              <div class="feature-item">
                  <strong>General Features</strong>
                  <p>Heat</p>
              </div>
              <div class="feature-item">
                  <strong>Parking</strong>
                  <p>Extended Garage</p>
              </div>
              <div class="feature-item">
                <strong>Schools</strong>
                  <div id="property-highschool-detail" class='property-school-detail'>High School: {{property.highschool_district }}</div>
                  <div id="property-middleschool-detail" class='property-school-detail'>Middle School: {{property.middle_junior_school_district }}</div>
              </div>
          </div>
      </div>
      
    </div>

    <div class="carousel-card">
      <div class="carousel-container">
        {% if images %}
          {% for image in images  %}
           <div
            class="carousel-item"
            onclick="changeMainImage('{{image.url}}')"
          >
            <img src="{{image.url}}" alt="House Image" />
          </div> 
          {% endfor %}
        {% endif %}

      </div>
    </div>
  </div>





  <div id="additional_properties_container">
    <div class="card-body">
      <h5>Comunity</h5>
      <div class="property-detail-item"><span>Address: 
          {{property.house_number}} {{property.street_name}} {{property.street_suffix}},
          {{property.city}}, {{property.state}} {{property.postal_code}}</span>
      </div>
      <div class="property-detail-item">
          <span>County: {{property.county}}</span>
      </div>
      <div class="property-detail-item">
        <span>City: {{property.city}}</span>
      </div>
      <div class="property-detail-item">
        <div id="property-highschool-detail" class='property-school-detail'><span>Schools : </span><span>{{property.highschool_district }} | <span>{{property.middle_junior_school_district }}</span></div></span>
      </div>
      <div class="property-detail-item">
        <span>Zip: {{property.postal_code}}</span>
      </div>
      <div class="property-detail-item">
        <span>HOA: </span>
      </div>
    </div>

    <div class="card-body">
      <h5>Features / Amenities</h5>
      <div class="features-grid">
        <div class="feature-item">
            <strong>Appliances</strong>
            {% for appliance in property.appliances  %}
            {{appliance}}{% endfor %}
            {% for item in property.laundry_features  %}{{item}}{% endfor %}
        </div>
        <div class="feature-item">
          <strong>Features</strong>
          {% for item in property.building_features  %}{{item}}{% endfor %}
        </div>
        <div class="feature-item">
          <strong>Cooling</strong>
          {% for item in property.cooling  %}{{item}}{% endfor %}
        </div>
      </div>
    </div>

    <div class="card-body">
      <h5>Architecture</h5>
      <div class="features-grid">
        <div class="feature-item">
            <span>Bedrooms: {{property.bedrooms}}</span>
        </div>
        <div class="feature-item">
          <span>Bathrooms: {{property.bathrooms_total}}</span>
      </div>
      <div class="feature-item">
        <span>Year Built: {{property.year_built}}</span>
      </div>
      <div class="feature-item">
        {% for item in property.construction_materials %}
        <span>Exterior: {{item}}</span>
        {% endfor %}
      </div>
      <div class="feature-item">
        {% for item in property.construction_materials %}
        <span>Windows: </span>
        {% endfor %}
      </div>
      <div class="feature-item">
        {% for item in property.construction_materials %}
        <span>Roof: </span>
        {% endfor %}
      </div>
      <div class="feature-item">
        {% for item in property.construction_materials %}
        <span>Foundation: </span>
        {% endfor %}
      </div>
      <div class="feature-item">
        {% for item in property.construction_materials %}
        <span>Garage / Carport: </span>
        {% endfor %}
      </div>
    </div>

    <div class="card-body">
      <h5>Property Features</h5>
      <div class="features-grid">
        <div class="feature-item">
            <span>Lot Size: </span>
        </div>
        <div class="feature-item">
          <span>Water: </span>
        </div>
        <div class="feature-item">
          <span>Sewer: </span>
        </div>
        <div class="feature-item">
          <span>Zoning: </span>
        </div>
      </div>
    </div>
  </div>
  <script>
    function changeMainImage(imageUrl) {
      document.getElementById("mainImage").src = imageUrl;
    }

    function scrollCarousel(direction) {
      const container = document.querySelector(".carousel-container");
      container.scrollLeft += direction * container.offsetWidth;
    }
  </script>

  {% endblock content %}
</div>
